if(!PHP2Go.included[PHP2Go.baseUrl+'form/colorpickerfield.js']){PHP2Go.include(PHP2Go.baseUrl+'widgets/colorpicker.js');ColorPickerField=function(id,options){this.ComponentField($(id),'ColorPickerField');this.mode=options.mode||'flat';this.container=(options.container?$(options.container):null);this.trigger=(options.trigger?$(options.trigger):null);this.picker=null;this.setup();};ColorPickerField.extend(ComponentField,'ComponentField');ColorPickerField.prototype.setup=function(){var self=this;if(this.mode=='popup'){this.picker=new ColorPicker({mode:'popup',trigger:this.trigger,color:this.fld.value,nullColor:'',onSelect:function(color){self.fld.value=color;self.raiseEvent('change');}});}else{this.picker=new ColorPicker({mode:'flat',container:this.container,color:this.fld.value,nullColor:'',onSelect:function(color){self.fld.value=color;self.raiseEvent('change');}});}this.fld.component=this;this.picker.setDisabled(this.fld.disabled);if(this.mode=='flat'){this.picker.text.auxiliary=true;this.picker.text.accessKey=this.fld.accessKey;this.picker.text.tabIndex=this.fld.tabIndex;}Event.addListener(this.fld.form,'reset',function(evt){self.picker.setColor(self.picker.defaultColor);});if(this.mode=='flat'){Event.addListener(this.picker.text,'focus',function(evt){self.raiseEvent('focus');});Event.addListener(this.picker.text,'blur',function(evt){self.raiseEvent('blur');});}};ColorPickerField.prototype.setValue=function(color){this.fld.value=color;if(this.mode=='flat'){this.picker.setColor(color);this.raiseEvent('change');}};ColorPickerField.prototype.clear=function(){this.picker.setColor(null);};ColorPickerField.prototype.enable=function(){this.fld.disabled=false;this.picker.setDisabled(false);};ColorPickerField.prototype.disable=function(){this.fld.disabled=true;this.picker.setDisabled(true);};ColorPickerField.prototype.focus=function(){if(this.beforeFocus()&&!this.fld.disabled){if(this.mode=='flat')this.picker.text.select();else this.fld.focus();return true;}return false;};PHP2Go.included[PHP2Go.baseUrl+'form/colorpickerfield.js']=true;}