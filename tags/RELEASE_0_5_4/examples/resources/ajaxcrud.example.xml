<?xml version="1.0" encoding="iso-8859-1"?>
<form>
	<section id="ajaxcrud" name="Add/Edit Person">
		<hiddenfield name="id_people" value=""/>
		<editfield name="name" label="Name" size="30" length="50" required="T" accesskey="N"/>
		<combofield name="sex" label="Sex" width="80" required="T" accesskey="X">
			<option value="M" caption="Male"/>
			<option value="F" caption="Female"/>
		</combofield>
		<editfield name="birth_date" label="Birth Date" size="10" length="12" mask="DATE" required="T" accesskey="B"/>
		<editfield name="address" label="Address" size="40" length="100" required="T" accesskey="D"/>
		<lookupfield name="id_country" label="Country" width="200" required="T" accesskey="C">
			<datasource>
				<keyfield>id_country</keyfield>
				<displayfield>name</displayfield>
				<lookuptable>country</lookuptable>
				<orderby>name</orderby>
			</datasource>
		</lookupfield>
		<memofield name="notes" label="Notes" rows="8" cols="35" accesskey="T"/>
		<checkfield name="active" caption="Is active" default="T" accesskey="A"/>
		<buttons>
			<button type="SUBMIT" name="btn" value="Save" accesskey="S">
				<!--
					This listener overrides the submission routine for this form, doing it via AJAX

					- formsubmit='T' indicates that the listener submits the form in which it is included
					- when formsubmit='T' and url is not provided, the form action will be used as target URL
					- class='AjaxUpdater' means that we want to fill a given "container" with the returned response
					- inside "onJSONResult", we fill "msg" with the returned JSON object (in this case, success or error message)
				-->
				<listener type="AJAX" event="onClick" class="AjaxUpdater" formsubmit="T">
					<param name="container">people_list</param>
					<param name="throbber">throbber_save</param>
					<param name="params">{action:"save"}</param>
					<![CDATA[
						return {
							onJSONResult : function(response) {
								var msg = $('msg');
								msg.update(response.json);
								msg.show();
							}
						};
					]]>
				</listener>
			</button>
		</buttons>
	</section>
</form>