if(!PHP2Go.included[PHP2Go.baseUrl+'dom.js']){Element=function(name,parent,style,html,attrs){name=name.toLowerCase(),attrs=attrs||{};var elm=null;if(PHP2Go.browser.ie&&(attrs.name||attrs.type)){name='<'+name+(attrs.name?' name="'+attrs.name+'"':'')+(attrs.type?' type="'+attrs.type+'"':'')+'>';delete attrs.name;delete attrs.type;elm=$E(document.createElement(name));}else{if(!Element.cache[name])Element.cache[name]=$E(document.createElement(name));elm=Element.cache[name].cloneNode(false);}(style)&&(elm.setStyle(style));(parent)&&(parent.appendChild(elm));(html)&&(elm.innerHTML=html);(attrs)&&(elm.writeAttribute(attrs));return elm;};Element.prototype.getTag=function(){return this.tagName.toLowerCase();};Element.prototype.hasAttribute=function(attr){attr=Element.translation.attrs.names[attr]||attr;if(this.getAttributeNode){var node=this.getAttributeNode(attr);return(node?node.specified:false);}return false;};Element.prototype.readAttribute=function(attr){var trans=Element.translation.attrs,tn,flag=0,node;if(tn=trans.names[attr])return this[tn];if(flag=trans.iflag[attr])return this.getAttribute(attr,flag);return this.getAttribute(attr);};Element.prototype.writeAttribute=function(attr,value){var trans=Element.translation.attrs;var attrs=attr;if(Object.isString(attr)){attrs={};attrs[attr]=value;}for(var attr in attrs){var tn=trans.names[attr];if(tn){this[tn]=attrs[attr];}else if(trans.write[attr]){trans.write[attr](this,attrs[attr]);}else if(attrs[attr]===null){this.removeAttribute(attr);}else{this.setAttribute(attr,attrs[attr]);}}return this;};Element.prototype.recursivelyCollect=function(prop){var res=[],elm=this;while(elm=elm[prop]){if(elm.nodeType==1)res.push($E(elm));}return res;};Element.prototype.recursivelySum=function(prop){var res=0,elm=this;while(elm){if(elm.getComputedStyle('position')=='fixed')return 0;var val=elm[prop];if(val){res+=val-0;}if(elm==document.body)break;elm=elm.parentNode;}return res;};if(document.evaluate){Element.prototype.getElementsByClassName=function(clsNames){clsNames=(clsNames+'').trim();if(!clsNames.empty()){clsNames=clsNames.split(/\s+/);var cond=clsNames.valid(function(item,idx){return(item.empty()?null:"[contains(concat(' ', @class, ' '), ' %1 ')]".assignAll(item));}).join('');return(cond?document.getElementsByXPath('.//*'+cond,this):[]);}return[];};document.getElementsByXPath=function(expr,parent){var res=[],qry=document.evaluate(expr,$(parent)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var i=0,s=qry.snapshotLength;i<s;i++)res.push($E(qry.snapshotItem(i)));return res;};}else{Element.prototype.getElementsByClassName=function(clsNames){clsNames=(clsNames+'').trim();if(!clsNames.empty()){var clsStr=' '+clsNames+' ',clsList=clsNames.split(/\s+/);var res=[],elms=this.getElementsByTagName('*');for(var i=0,ch;ch=elms[i];i++){if(ch.className){var cn=' '+ch.className+' ';if(cn.find(clsStr)||clsList.every(function(item,idx){return(!item.empty()&&cn.find(' '+item+' '));}))res.push($E(ch));}}return res;}return[];};}if(!document.getElementsByClassName){document.getElementsByClassName=function(clsNames){return Element.getElementsByClassName(document,clsNames);};}Element.prototype.getParentByTagName=function(tag){var elm=this;while(elm){if(elm.nodeName.equalsIgnoreCase(tag))return $E(elm);elm=elm.parentNode;}return null;};Element.prototype.getParentNodes=function(){return this.recursivelyCollect('parentNode');};Element.prototype.setParentNode=function(p){if(p=$(p)){var child=this;if(child.parentNode){if(child.parentNode==p)return child;child.oldParent=child.parentNode;child=this.parentNode.removeChild(child);}return p.appendChild(child);}return null;};Element.prototype.getChildNodes=function(){var res=[],fc=null;if(fc=this.firstChild){while(!Object.isElement(fc))fc=fc.nextSibling;if(fc){fc=$E(fc);return[fc].concat(fc.getNextSiblings());}}return res;};Element.prototype.getPreviousSiblings=function(){return this.recursivelyCollect('previousSibling');};Element.prototype.getNextSiblings=function(){return this.recursivelyCollect('nextSibling');};Element.prototype.getSiblings=function(){return this.recursivelyCollect('previousSibling').reverse().concat(this.recursivelyCollect('nextSibling'));};Element.prototype.isChildOf=function(anc){if(anc=$(anc)){if(anc.contains&&!PHP2Go.browser.khtml){return anc.contains(this);}else if(anc.compareDocumentPosition){return!!(anc.compareDocumentPosition(this)&16);}else{var p=this.parentNode;while(p){if(p==anc)return true;if(p.tagName.equalsIgnoreCase('html'))return false;p=p.parentNode||null;}}}return false;};Element.prototype.getPosition=function(tbt){var p={x:0,y:0};var b=PHP2Go.browser,db=document.body||document.documentElement;var nbt=Element.BORDER_BOX,tbt=Object.ifUndef(tbt,Element.BORDER_BOX);if(this.getBoundingClientRect){var bcr=this.getBoundingClientRect();p.x=bcr.left-2;p.y=bcr.top-2;}else if(document.getBoxObjectFor){nbt=Element.PADDING_BOX;var box=document.getBoxObjectFor(this);p.x=box.x-this.recursivelySum('scrollLeft');p.y=box.y-this.recursivelySum('scrollTop');}else if(this.offsetParent){if(this.parentNode!=db){p.x-=Element.recursivelySum((b.opera?db:this),'scrollLeft');p.y-=Element.recursivelySum((b.opera?db:this),'scrollTop');}var cur=this,end=(b.safari&&this.style.getPropertyValue('position')=='absolute'&&this.parentNode==db?db:db.parentNode);do{var l=this.offsetLeft;if(!b.opera||l>0)p.x+=(isNaN(l)?0:l);var t=this.offsetTop;p.y+=(isNaN(t)?0:t);cur=cur.offsetParent;}while(cur!=end&&cur!=null);}else if(this.x&&this.y){p.x+=(isNaN(this.x)?0:this.x);p.y+=(isNaN(this.y)?0:this.y);}var extents=['padding','border','margin'];if(nbt>tbt){for(var i=tbt;i<nbt;i++){if(extents[i]=='border'){p.x+=this.getBorder('left');p.y+=this.getBorder('top');}else{p.x+=Object.toPixels(this.getComputedStyle(extents[i]+'-left'));p.y+=Object.toPixels(this.getComputedStyle(extents[i]+'-top'));}}}else if(tbt>nbt){for(var i=tbt;i>nbt;--i){if(extents[i-1]=='border'){p.x-=this.getBorder('left');p.y-=this.getBorder('top');}else{p.x-=Object.toPixels(this.getComputedStyle(extents[i-1]+'-left'));p.y-=Object.toPixels(this.getComputedStyle(extents[i-1]+'-top'));}}}return p;};Element.prototype.getDimensions=function(){var d={width:0,height:0};if(this.getComputedStyle('display')!='none'){if(this.offsetWidth&&this.offsetHeight){d.width=this.offsetWidth;d.height=this.offsetHeight;}else if(this.style&&this.style.pixelWidth&&this.style.pixelHeight){d.width=this.style.pixelWidth;d.height=this.style.pixelHeight;}}else{var self=this;this.swapStyles({position:'absolute',visibility:'hidden',display:(this.tagName.equalsIgnoreCase('div')?'block':'')},function(){d.width=self.clientWidth;d.height=self.clientHeight;});}return d;};Element.prototype.getBorder=function(side){return(this.getComputedStyle('border-'+side+'-style')=='none'?0:Object.toPixels(this.getComputedStyle('border-'+side+'-width')));};Element.prototype.getBorderBox=function(){return{width:this.getBorder('left')+this.getBorder('right'),height:this.getBorder('top')+this.getBorder('bottom')};};Element.prototype.getPaddingBox=function(){var tp=Object.toPixels;return{width:tp(this.getComputedStyle('padding-left'))+tp(this.getComputedStyle('padding-right')),height:tp(this.getComputedStyle('padding-top'))+tp(this.getComputedStyle('padding-bottom'))};};Element.prototype.isWithin=function(p1,p2){var p=this.getPosition(),d=this.getDimensions();var ex1=p.x,ex2=(p.x+d.width),ey1=p.y,ey2=(p.y+d.height);return(ex1<p2.x&&ex2>p1.x&&ey1<p2.y&&ey2>p1.y);};Element.prototype.getInnerText=function(){var tag=this.getTag();if(tag=='script'||tag=='style'){if(PHP2Go.browser.ie)return(tag=='style'?this.styleSheet.cssText:this.readAttribute('text'));return this.innerHTML;}if(this.innerText)return this.innerText;if(this.textContent)return this.textContent;var s='',cs=this.childNodes;for(var i=0;i<cs.length;i++){switch(cs[i].nodeType){case 1:s+=Element.getInnerText(cs[i]);break;case 3:s+=cs[i].nodeValue;break;}}return s;};Element.prototype.setInnerText=function(text){var tag=this.getTag();if(tag=='script'||tag=='style'){if(PHP2Go.browser.ie){if(tag=='style')this.styleSheet.cssText=text;else this.writeAttribute('text',text);}else{(this.firstChild)&&(this.removeChild(this.firstChild));this.appendChild(document.createTextNode(text));}}else{this[!Object.isUndef(this.innerText)?'innerText':'textContent']=text;}return this;};if(PHP2Go.browser.ie){Element.prototype.getComputedStyle=function(prop){if(this.currentStyle)return this.currentStyle[prop.camelize()];return null;};Element.prototype.getComputedStyles=function(){return this.currentStyle||null;};}else{Element.prototype.getComputedStyle=function(prop){var d=document,cs;if(d.defaultView&&d.defaultView.getComputedStyle){if(cs=d.defaultView.getComputedStyle(this,null))return cs[prop.camelize()];}return null;};Element.prototype.getComputedStyles=function(){var d=document;if(d.defaultView&&d.defaultView.getComputedStyle)return d.defaultView.getComputedStyle(this,null);return null;};}Element.prototype.getStyle=function(prop){var val=null;if(this.style){var d=document,camel=prop.camelize();if(PHP2Go.browser.ie&&(prop=='float'||prop=='cssFloat'))camel='styleFloat';else if(prop=='float')camel='cssFloat';val=this.style[camel];if(!val)val=this.getComputedStyle(prop);if(PHP2Go.browser.opera&&['left','top','right','bottom'].contains(prop)&&this.getComputedStyle('position')=='static')val=null;(val=='auto')&&(val=null);(prop=='opacity'&&val)&&(val=parseFloat(val,10));}return val;};Element.prototype.setStyle=function(prop,value){var props=prop;if(Object.isString(prop)){props={};props[prop]=value;}for(var prop in props){switch(prop){case'opacity':this.setOpacity(props[prop]);break;case'width':case'height':this.style[prop.camelize()]=props[prop];if(PHP2Go.browser.wch&&this.getComputedStyle('position')=='absolute'&&this.getComputedStyle('display')!='none')WCH.update(this);break;default:this.style[prop.camelize()]=props[prop];break;}}return this;};Element.prototype.swapStyles=function(props,func){for(var p in props){this.style['old'+p]=this.style[p];this.style[p.camelize()]=props[p];}func();for(var p in props){this.style[p.camelize()]=this.style['old'+p];this.style['old'+p]=null;}return this;};Element.prototype.getOpacity=function(){var op=1;if(PHP2Go.browser.ie){var mt=[];if(mt=Element.prototype.getOpacity.re.exec(this.getStyle('filter')||''))op=(parseFloat(mt[1],10)/100);}else{op=parseFloat(this.style.opacity||this.style.MozOpacity||this.style.KhtmlOpacity||1,10);}return(op>=0.999999?1:op);};Element.prototype.getOpacity.re=/alpha\(opacity=(.*)\)/;Element.prototype.setOpacity=function(op){op=(isNaN(op)||op>=1?1:(op<0.00001?0:op));var s=this.style,b=PHP2Go.browser;s.opacity=op;if(b.ie){s.zoom=1;s.filter=(this.getStyle('filter')||'').replace(Element.prototype.setOpacity.re,'');s.filter+='alpha(opacity='+Math.round(op*100)+')';}else if(b.mozilla){s.MozOpacity=op;}else if(b.khtml){s.KhtmlOpacity=op;}return this;};Element.prototype.setOpacity.re=/alpha\([^\)]*\)/gi;Element.prototype.hasClass=function(cl){var ec=this.className,cl=cl+'';return((ec.length>0&&ec==cl)||(ec.match(new RegExp("(^|\\s)"+cl+"(\\s|$)"))));};Element.prototype.addClass=function(cl){cl+='';if(!this.hasClass(cl))this.className+=(this.className?' ':'')+cl;return this;};Element.prototype.removeClass=function(cl){var cl=cl+'',re=new RegExp("^"+cl+"\\b\\s*|\\s*\\b"+cl+"\\b",'g');this.className=this.className.replace(re,'');return this;};Element.prototype.toggleClass=function(cl){cl+='';this[this.hasClass(cl)?'removeClass':'addClass'](cl);return this;};Element.prototype.isVisible=function(){var elm=this;while(elm&&elm!=document){if(elm.style.display=='none'||elm.style.visibility=='hidden')return false;elm=elm.parentNode;}return true;};Element.prototype.show=function(){this.style.display=(this.tagName.equalsIgnoreCase('div')?'block':'');if(PHP2Go.browser.wch&&this.getComputedStyle('position')=='absolute')WCH.attach(this);return this;};Element.prototype.hide=function(){this.style.display='none';if(PHP2Go.browser.wch&&this.getComputedStyle('position')=='absolute')WCH.detach(this);return this;};Element.prototype.toggleDisplay=function(){if(this.style.display=='none')this.show();else this.hide();return this;};Element.prototype.moveTo=function(x,y){this.setStyle('left',x+'px');this.setStyle('top',y+'px');if(PHP2Go.browser.wch&&this.getComputedStyle('position')=='absolute')WCH.update(this,{position:{x:x,y:y}});return this;};Element.prototype.resizeTo=function(w,h){this.setStyle('width',w+'px');this.setStyle('height',h+'px');if(PHP2Go.browser.wch&&this.getComputedStyle('position')=='absolute')WCH.update(this,{dimensions:{width:w,height:h}});return this;};Element.prototype.scrollTo=function(){var pos=this.getPosition();window.scrollTo(pos.x,pos.y);return this;};Element.prototype.insertAfter=function(ref){if(ref.nextSibling)ref.parentNode.insertBefore(this,ref.nextSibling);else ref.parentNode.appendChild(this);return this;};Element.prototype.insert=function(ins,position,evalScripts){evalScripts=!!evalScripts,position=position||'bottom';var pos=Element.insertion[position];if(pos){if(Object.isElement(ins)){pos.insert(this,ins);return this;}ins=String(ins);if(!document.createRange||PHP2Go.browser.opera){var tag=this.tagName.toUpperCase();var tran=Element.translation;if(tag in tran.tags){var frag=tran.createFromHTML(tag,ins.stripScripts());(position=='top'||position=='bottom')&&(frag.reverse());frag.walk(function(item,idx){pos.insert(this,item);});}else{this.insertAdjacentHTML(pos.adjacency,ins.stripScripts());}}else{var rng=this.ownerDocument.createRange();pos.initializeRange(this,rng);pos.insert(this,rng.createContextualFragment(ins.stripScripts()));}(evalScripts)&&(ins.evalScriptsDelayed());}return this;};Element.prototype.update=function(upd,evalScripts,useDom){evalScripts=!!evalScripts,useDom=!!useDom;if(Object.isElement(upd))return this.clear().insert(upd);upd=String(upd);if(upd.empty())return this.clear(useDom);var tag=this.tagName.toUpperCase();var tran=Element.translation;if(PHP2Go.browser.ie&&tag in tran.tags){while(this.firstChild)this.removeChild(this.firstChild);var self=this,frag=tran.createFromHTML(tag,upd.stripScripts());frag.walk(function(item,idx){self.appendChild(item);});}else if(useDom){var div=document.createElement('div');div.innerHTML=upd.stripScripts();while(this.firstChild)this.removeChild(this.firstChild);while(div.firstChild)this.appendChild(div.removeChild(div.firstChild));delete div;}else{this.innerHTML=upd.stripScripts();}(evalScripts)&&(upd.evalScriptsDelayed());return this;};Element.prototype.replace=function(rep,evalScripts){evalScripts=!!evalScripts;if(Object.isElement(rep)){this.parentNode.replaceChild(rep,this);return this;}rep=String(rep);if(this.outerHTML){var tag=this.tagName.toUpperCase();var tran=Element.translation;if(tag in tran.tags){var par=this.parentNode;var next=this.nextSibling;while(next&&!Object.isElement(next))next=next.nextSibling;var frag=tran.createFromHTML(tag,rep.stripScripts());par.removeChild(this);if(next)frag.walk(function(item,idx){par.insertBefore(item,next);});else frag.walk(function(item,idx){par.appendChild(item);});}else{this.outerHTML=rep.stripScripts();}}else{var rng=this.ownerDocument.createRange();rng.selectNode(this);this.parentNode.replaceChild(rng.createContextualFragment(rep.stripScripts()),this);}(evalScripts)&&(rep.evalScriptsDelayed());return this;};Element.prototype.clear=function(useDom){useDom=!!useDom;if(useDom){while(this.firstChild)this.removeChild(this.firstChild);}else{this.innerHTML='';}return this;};Element.prototype.empty=function(){return this.innerHTML.empty();};Element.prototype.remove=function(){if(this.parentNode)this.parentNode.removeChild(this);return this;};Element.extend=function(props){for(var prop in props){if(Object.isFunc(props[prop])){HTMLElement.prototype[prop]=props[prop];Element.prototype[prop]=props[prop];Element[prop]=props[prop].methodize($E);}}};Element.cache={};Element.CONTENT_BOX=0;Element.PADDING_BOX=1;Element.BORDER_BOX=2;Element.MARGIN_BOX=3;Element.insertion={before:{adjacency:'BeforeBegin',initializeRange:function(elm,rng){rng.setStartBefore(elm);},insert:function(elm,ins){elm.parentNode.insertBefore(ins,elm);}},top:{adjacency:'AfterBegin',initializeRange:function(elm,rng){rng.selectNodeContents(elm);rng.collapse(true);},insert:function(elm,ins){elm.insertBefore(ins,elm.firstChild);}},bottom:{adjacency:'BeforeEnd',insert:function(elm,ins){elm.appendChild(ins);}},after:{adjacency:'AfterEnd',initializeRange:function(elm,rng){rng.setStartAfter(elm);},insert:function(elm,ins){elm.parentNode.insertBefore(ins,elm.nextSibling);}}};Element.insertion.bottom.initializeRange=Element.insertion.top.initializeRange;Element.translation={attrs:{names:{'class':'className','className':'className','for':'htmlFor','colspan':'colSpan','rowspan':'rowSpan','valign':'vAlign','cellspacing':'cellSpacing','cellpadding':'cellPadding','enctype':'encType','accesskey':'accessKey','tabindex':'tabIndex','maxlength':'maxLength','readonly':'readOnly','frameborder':'frameBorder','value':'value','disabled':'disabled','checked':'checked','multiple':'multiple','selected':'selected','title':(PHP2Go.browser.ie||PHP2Go.browser.opera?'title':null)},iflag:(PHP2Go.browser.ie?{src:2,href:2,type:2 }:{}),read:{'style':function(elm){return elm.style.cssText.toLowerCase();}},write:{'style':function(elm,value){elm.style.cssText=(value?value:'');}}},tags:{TABLE:['<table>','</table>',1],TBODY:['<table><tbody>','</tbody></table>',2],THEAD:['<table><tbody>','</tbody></table>',2],TFOOT:['<table><tbody>','</tbody></table>',2],TR:['<table><tbody><tr>','</tr></tbody></table>',3],TH:['<table><tbody><tr><td>','</td></tr></tbody></table>',4],TD:['<table><tbody><tr><td>','</td></tr></tbody></table>',4],SELECT:['<select>','</select>',1]},div:document.createElement('div'),createFromHTML:function(tn,html){var self=Element.translation,t=self.tags[tn];self.div.innerHTML=t[0]+html+t[1];var div=self.div;for(var i=0;i<t[2];i++)div=div.firstChild;return $A(div.childNodes);}};$E=function(elm){if(!elm)return null;if(!elm.nodeType||elm.nodeType!=1)return elm;if(elm===window||elm===document)return elm;if(elm._extended||PHP2Go.nativeElementExtensions)return elm;Object.extend(elm,Element.prototype,false);elm._extended=$EF;return elm;};$N=function(name,parent,style,html,attrs){return new Element(name,parent,style,html,attrs);};if(!PHP2Go.nativeElementExtension){window.HTMLElement=$EF;if(document.createElement('div').__proto__){window.HTMLElement.prototype=document.createElement('div').__proto__;PHP2Go.nativeElementExtension=true;}}Element.extend(Element.prototype);var WCH={attach:function(elm){elm=$(elm);if(PHP2Go.browser.ie5){var elms=[],list=[];var tags=['select','iframe','applet','object','embed'];var p=elm.getPosition(),d=elm.getDimensions();var p1={x:p.x,y:p.y};var p2={x:(p.x+d.width),y:(p.y+d.height)};for(var i=0;i<tags.length;i++){elms=document.getElementsByTagName(tags[i]);for(var j=0;j<elms.length;j++){if(Element.isWithin(elms[j],p1,p2)){elms[j].style.visibility="hidden";list.push(elms[j]);}}}elm.wchList=list;}else{var wch,pos=elm.getPosition(Element.BORDER_BOX),dim=elm.getDimensions();var zi=elm.getComputedStyle('z-index');if(!elm.wchIframe){wch=elm.wchIframe=$N('iframe',elm.parentNode,{position:'absolute',filter:'progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0);'});if(zi<=2)zi=elm.style.zIndex=1000;}else{wch=elm.wchIframe;}wch.style.display='';wch.style.width=dim.width+'px';wch.style.height=dim.height+'px';wch.style.top=pos.y+'px';wch.style.left=pos.x+'px';wch.style.zIndex=zi-1;}},detach:function(elm){if(elm.wchIframe)elm.wchIframe.style.display='none';if(elm.wchList){elm.wchList.walk(function(item,idx){item.style.visibility='visible';});elm.wchList=null;}},update:function(elm,opts){if(elm.wchIframe||elm.wchList){if(elm.wchIframe){opts=opts||{};var pos=opts.position||elm.getPosition(Element.BORDER_BOX);var dim=opts.dimensions||elm.getDimensions();elm.wchIframe.style.left=pos.x;elm.wchIframe.style.top=pos.y;elm.wchIframe.style.width=dim.width;elm.wchIframe.style.height=dim.height;}else{this.detach(elm);this.attach(elm);}}else{this.attach(elm);}}};if(!window.Event){var Event={};if(!PHP2Go.nativeEventExtension)Event.prototype={};}Event.onDOMReady=function(fn){if(this.done){fn();return;}if(!this.queue){var self=this,b=PHP2Go.browser,d=document;var ready=function(){if(!self.done){for(var i=0;i<self.queue.length;i++)self.queue[i]();self.queue=null;self.done=true;i }};this.queue=[];if(d.addEventListener){d.addEventListener('DOMContentLoaded',ready,false);}else if(d.readyState&&b.ie){var f=function(){try{d.firstChild.doScroll('left');ready();}catch(e){f.delay(10);}};f.delay(0);}else if(d.readyState&&(b.khtml||b.opera)){var f=function(){if(/loaded|complete/.test(d.readyState))ready();else f.delay(10);};f.delay(0);}else{this.addLoadListener(ready);}}this.queue.push(fn);};Event.addLoadListener=function(fn){if(!document.body){Event.addListener(window,'load',fn);}else{var oldLoad=window.onload;if(typeof oldLoad!='function'){window.onload=fn;}else{window.onload=function(){oldLoad();fn();}}}};Event.handlers={cache:{},getCacheId:function(elm){if(elm.eventId)return elm.eventId;arguments.callee.id=arguments.callee.id||1;return elm.eventId=arguments.callee.id++;},getEventName:function(type){type=type.replace(/^on/i,'').toLowerCase();(type=='keypress'&&PHP2Go.browser.khtml)&&(type='keydown');return type;},getHandlers:function(elm,type){var id=this.getCacheId(elm);var c=this.cache[id]=this.cache[id]||{};return c[type]=c[type]||[];},add:function(elm,type,fn){var h=this.getHandlers(elm,type);if(h.indexOf(fn)==-1){h.push(fn);return true;}return false;},remove:function(elm,type,fn){var h=this.getHandlers(elm,type);var p=h.indexOf(fn);if(p!=-1){h.splice(pos,1);return true;}return false;},fire:function(elm,type){var h=this.getHandlers(elm,type);h.walk(function(h,i){h.apply(elm);});},destroy:function(){for(var id in this.cache)for(var type in this.cache[id])this.cache[id][type]=null;delete this.cache;}};if(window.attachEvent){window.attachEvent('onunload',function(){Event.handlers.destroy();try{window.onload=$EF;window.onunload=$EF;}catch(e){}});}Event.addListener=function(elm,type,fn,capt){if(elm=$(elm)){var handlers=Event.handlers;var type=handlers.getEventName(type);if(handlers.add(elm,type,fn)){capt=!!capt;if(elm.addEventListener)elm.addEventListener(type,fn,capt);else if(elm.attachEvent)elm.attachEvent('on'+type,fn);}}};Event.removeListener=function(elm,type,fn,capt){if(elm=$(elm)){var handlers=Event.handlers;var type=handlers.getEventName(type);if(handlers.remove(elm,type,fn)){capt=!!capt;if(elm.removeEventListener)elm.removeEventListener(type,fn,capt);else if(elm.detachEvent)elm.detachEvent('on'+type,fn);}}};Event.fire=function(elm,type){if(elm=$(elm)){var handlers=Event.handlers;var type=handlers.getEventName(type);handlers.fire(elm,type);}};Event.extend=function(){function relatedTarget(ev){switch(ev.type){case'mouseover':return $E(ev.fromElement);case'mouseout':return $E(ev.toElement);default:return null;}}return function(ev){var proto=Event.prototype;proto.stopPropagation=function(){this.cancelBubble=true;};proto.preventDefault=function(){this.returnValue=false;};ev=Object.extend(ev,proto);ev.target=$E(ev.target||ev.srcElement);ev.relatedTarget=relatedTarget(ev);var pos=ev.position();ev.pageX=pos.x;ev.pageY=pos.y;return ev;}}();Event.prototype.element=function(){var elm=this.target;if(elm.nodeType){while(elm.nodeType!=1)elm=elm.parentNode;}return $E(elm);};Event.prototype.findElement=function(tag){var elm=this.element();return(elm?Element.getParentByTagName(elm,tag):null);};Event.prototype.isRelated=function(elm){if(elm=$(elm)){var rel=this.relatedTarget;return(rel&&(rel==elm||rel.isChildOf(elm)));}};Event.prototype.key=function(){return this.keyCode||this.which;};Event.prototype.char=function(){return String.fromCharCode(this.keyCode||this.which).toLowerCase();};Event.prototype.position=function(){var e=document.documentElement||document.body;return{x:this.pageX||(this.clientX+e.scrollLeft),y:this.pageY||(this.clientY+e.scrollTop)};};Event.prototype.stop=function(){this.preventDefault();this.stopPropagation();};Event.addLoadListener(function(){for(var i=0;i<Widget.widgets.length;i++){var attrs=Widget.widgets[i];var widget=new window[attrs[0]](attrs[1],attrs[2]);widget.setup();}});$EV=function(e){e=e||window.event;if(!e||PHP2Go.nativeEventExtension||e._extended)return e;e=Event.extend(e);e._extended=$EF;return e;};$K=function(e){e=(e||window.event);return(e.keyCode||e.which);};PHP2Go.included[PHP2Go.baseUrl+'dom.js']=true;}